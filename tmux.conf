#
# TMUX CONFIG
#
# ============================================================================
# KEYBINDINGS
# ============================================================================

# set default shell
set-option -g default-shell /usr/local/bin/zsh

# use C-f as prefix
unbind C-b
set -g prefix C-f
bind C-f send-prefix

# easier and faster switching between next/prev window
bind p previous-window
bind n next-window

# move between panes
bind k select-pane -U
bind j select-pane -D
bind h select-pane -L
bind l select-pane -R

# Pane resizing
bind -r C-k resize-pane -L 3
bind -r C-j resize-pane -D 3
bind -r C-h resize-pane -U 3
bind -r C-l resize-pane -R 3

# reload config
bind R source-file ~/.tmux.conf \; display-message "Config reloaded..."

# open a man page in new window
bind-key / command-prompt "split-window 'exec man %%'"

# use cwd when opening new splits
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# send focus events (fixes vim `autoread` w/ vim-tmux-focus-event plugin)
set -g focus-events on

# ============================================================================
# APPEARENCE
# ============================================================================

# set $TERM
set -g default-terminal "screen-256color"

# default statusbar colors
set -g status-fg white
set -g status-bg black # dark grey

# default window title colors
set-window-option -g window-status-fg white
set-window-option -g window-status-bg default
set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-fg white
set-window-option -g window-status-current-bg colour23 # dark cyan
set-window-option -g window-status-current-attr bright

# statusline
set -g status-left-length 20
set -g status-left '#[fg=green][ tmux |#[fg=white] #S#[fg=green] ] '
set -g status-right '#[fg=green][ #[fg=white]%H:%M#[fg=green] ]'

# panes
set-option -g pane-border-fg colour240 # light grey
set-option -g pane-border-bg default
set-option -g pane-active-border-fg white
set-option -g pane-active-border-bg default

# ============================================================================
# COPY/PASTE
# ============================================================================

# fix issue with os x clip board
set-option -g default-command "reattach-to-user-namespace -l /usr/local/bin/zsh"

# Setup 'v' to begin selection as in Vim
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# Update default binding of `Enter` to also use copy-pipe
unbind -t vi-copy Enter
bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"

# Bind ']' to use pbpaste
bind ] run "reattach-to-user-namespace pbpaste | tmux load-buffer - && tmux paste-buffer"

# ============================================================================
# GENERAL
# ============================================================================

# no escape time (important for vim)
set-option -sg escape-time 0

# use vi keybindings
set-option -g status-keys vi
set-window-option -g mode-keys vi

# keep tmux msgs around longer
set -g display-time 2000

# enable mouse
set-option -g -q mouse on

set-option -g history-limit 4000
